<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR 코드 테스트</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-md mx-auto bg-white rounded-xl shadow-lg p-8">
        <h1 class="text-2xl font-bold text-gray-800 mb-6 text-center">QR 코드 생성 테스트</h1>
        
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2">URL 입력:</label>
            <input type="text" id="urlInput" value="https://example.com/guestbook?booth_id=test123"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg">
        </div>
        
        <button onclick="generateQR()" 
            class="w-full bg-teal-500 hover:bg-teal-600 text-white font-semibold py-3 px-6 rounded-lg mb-6">
            QR 코드 생성
        </button>
        
        <div id="qrcode" class="flex justify-center bg-gray-50 p-6 rounded-lg"></div>
        
        <div id="errorMsg" class="mt-4 text-red-600 text-sm hidden"></div>
    </div>

    <script>
        function generateQR() {
            const url = document.getElementById('urlInput').value
            const qrcodeContainer = document.getElementById('qrcode')
            const errorMsg = document.getElementById('errorMsg')
            
            // 기존 QR코드 제거
            qrcodeContainer.innerHTML = ''
            errorMsg.classList.add('hidden')
            
            try {
                // QRCode 라이브러리가 로드되었는지 확인
                if (typeof QRCode === 'undefined') {
                    throw new Error('QRCode 라이브러리가 로드되지 않았습니다')
                }
                
                // QR코드 생성
                new QRCode(qrcodeContainer, {
                    text: url,
                    width: 256,
                    height: 256,
                    colorDark: "#0d9488",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.H
                })
                
                console.log('QR 코드 생성 성공!')
            } catch (error) {
                console.error('QR 코드 생성 실패:', error)
                errorMsg.textContent = '오류: ' + error.message
                errorMsg.classList.remove('hidden')
            }
        }
        
        // 페이지 로드 시 자동 생성
        window.addEventListener('load', () => {
            console.log('QRCode 라이브러리 로드 상태:', typeof QRCode !== 'undefined' ? '성공' : '실패')
            generateQR()
        })
    </script>
</body>
</html>
